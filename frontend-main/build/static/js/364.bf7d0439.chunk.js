"use strict";(self.webpackChunkfinalfrontend=self.webpackChunkfinalfrontend||[]).push([[364],{687:(e,a,t)=>{t.d(a,{A:()=>A});var r=t(7565),s=t(2749),l=t(278),c=t(6862),o=t(3950),i=t(1799),n=t(5518),d=t(5695),m=t(1887),u=t(7929);const{Sider:y}=s.A,A=()=>{const e=(0,m.Zp)(),a=(0,m.zy)(),[t,s]=(0,r.useState)("1");(0,r.useEffect)((()=>{switch(a.pathname){case"/seller/dashboard":default:s("1");break;case"/seller/products":s("2");break;case"/seller/orders":s("3");break;case"/seller/earnings":s("4")}}),[a.pathname]);return(0,u.jsx)(y,{collapsible:!0,className:"seller-sidebar",children:(0,u.jsxs)(l.A,{theme:"dark",mode:"vertical",selectedKeys:[t],children:[(0,u.jsx)(l.A.Item,{icon:(0,u.jsx)(c.A,{}),onClick:()=>e("/seller/dashboard"),children:"Dashboard"},"1"),(0,u.jsx)(l.A.Item,{icon:(0,u.jsx)(o.A,{}),onClick:()=>e("/seller/products"),children:"Manage Products"},"2"),(0,u.jsx)(l.A.Item,{icon:(0,u.jsx)(i.A,{}),onClick:()=>e("/seller/orders"),children:"Manage Orders"},"3"),(0,u.jsx)(l.A.Item,{icon:(0,u.jsx)(n.A,{}),onClick:()=>e("/seller/earnings"),children:"Earnings"},"4"),(0,u.jsx)(l.A.Item,{icon:(0,u.jsx)(d.A,{}),onClick:()=>{localStorage.removeItem("sellerToken"),e("/seller/login")},children:"Logout"},"5")]})})}},7364:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var r=t(7565),s=t(2749),l=t(5835),c=t(49),o=t(6597),i=t(580),n=t(7371),d=t(476),m=t(2812),u=t(2457),y=t(3841),A=t(7707),p=t(7920),h=t(1719),g=t(66),x=t(7509),I=t(687),j=t(5828),w=t(7929);const{Content:k}=s.A,{Option:v}=l.A,{TextArea:P}=c.A,S=["Active","Inactive"],b="http://localhost:5001/api/products",f=()=>{const[e,a]=(0,r.useState)(!0),[t,f]=(0,r.useState)([]),[C,$]=(0,r.useState)([]),[F,L]=(0,r.useState)(""),[N,T]=(0,r.useState)(!1),[E,z]=(0,r.useState)(null),[O,U]=(0,r.useState)({primaryImage:null,primaryImagePreview:"",secondaryImages:[],secondaryImagePreviews:[]}),[B]=o.A.useForm();(0,r.useEffect)((()=>{D()}),[]);const D=async()=>{try{a(!0);const e=localStorage.getItem("sellerToken"),{data:t}=await j.A.get(`${b}/seller`,{headers:{Authorization:`Bearer ${e}`}});f(t),$(t)}catch(e){console.error("Fetch Error:",e),i.Ay.error("Failed to load products.")}finally{a(!1)}},R=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(T(!0),B.resetFields(),e){z(e._id);try{const a=localStorage.getItem("sellerToken"),{data:t}=await j.A.get(`${b}/${e._id}`,{headers:{Authorization:`Bearer ${a}`}});B.setFieldsValue(t),U({primaryImagePreview:t.primaryImage,secondaryImagePreviews:t.secondaryImages||[],primaryImage:null,secondaryImages:[]})}catch(a){i.Ay.error("Failed to fetch product data.")}}else z(null)},_=()=>{T(!1),B.resetFields(),U({primaryImage:null,primaryImagePreview:"",secondaryImages:[],secondaryImagePreviews:[]})},q=e=>{const a="image/jpeg"===e.type||"image/png"===e.type,t=e.size/1024/1024<2;return a||i.Ay.error("Only JPG/PNG images are allowed!"),t||i.Ay.error("Image must be smaller than 2MB!"),a&&t},M=[{title:"Name",dataIndex:"productName",key:"productName"},{title:"Category",dataIndex:"category",key:"category"},{title:"Company",dataIndex:"companyName",key:"companyName"},{title:"Price",dataIndex:"price",key:"price",sorter:(e,a)=>e.price-a.price},{title:"Stock",dataIndex:"stock",key:"stock",sorter:(e,a)=>e.stock-a.stock},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:e=>new Date(e).toLocaleDateString(),sorter:(e,a)=>new Date(e.createdAt)-new Date(a.createdAt)},{title:"Status",dataIndex:"status",key:"status",filters:[{text:"Active",value:"Active"},{text:"Inactive",value:"Inactive"}],onFilter:(e,a)=>a.status===e,render:(e,a)=>(0,w.jsx)(n.A,{checked:"Active"===e,onChange:e=>(async(e,a)=>{try{const t=localStorage.getItem("sellerToken");await j.A.put(`${b}/status/${e}`,{status:a?"Active":"Inactive"},{headers:{Authorization:`Bearer ${t}`}}),i.Ay.success("Product status updated!"),D()}catch(t){console.error("Status Toggle Error:",t),i.Ay.error("Failed to update status.")}})(a._id,e)})},{title:"Actions",render:(e,a)=>(0,w.jsxs)(d.A,{children:[(0,w.jsx)(m.Ay,{onClick:()=>R(a),children:"Edit"}),(0,w.jsx)(m.Ay,{danger:!0,onClick:()=>(async e=>{try{const a=localStorage.getItem("sellerToken");await j.A.delete(`${b}/delete/${e}`,{headers:{Authorization:`Bearer ${a}`}}),i.Ay.success("Product deleted successfully!"),D()}catch(a){i.Ay.error("Failed to delete product.")}})(a._id),children:"Delete"})]})}];return(0,w.jsxs)(s.A,{children:[(0,w.jsx)(I.A,{}),(0,w.jsxs)(k,{style:{padding:24},children:[(0,w.jsxs)(d.A,{style:{marginBottom:16},children:[(0,w.jsx)(c.A.Search,{placeholder:"Search by name or category",value:F,onChange:e=>(e=>{L(e);const a=t.filter((a=>a.productName.toLowerCase().includes(e.toLowerCase())||a.category.toLowerCase().includes(e.toLowerCase())));$(a)})(e.target.value),style:{width:300},allowClear:!0}),(0,w.jsx)(m.Ay,{type:"primary",icon:(0,w.jsx)(g.A,{}),onClick:()=>R(),children:"Add Product"})]}),(0,w.jsx)(u.A,{dataSource:C,columns:M,rowKey:"_id",loading:e,pagination:{pageSize:10}}),(0,w.jsx)(y.A,{open:N,title:E?"Edit Product":"Add Product",onCancel:_,onOk:async()=>{try{const e=await B.validateFields(),a=localStorage.getItem("sellerId"),t=localStorage.getItem("sellerToken"),r=new FormData;Object.entries(e).forEach((e=>{let[a,t]=e;r.append(a,t)})),O.primaryImage&&r.append("primaryImage",O.primaryImage),(O.secondaryImages||[]).forEach((e=>r.append("secondaryImages",e))),r.append("sellerId",a);const s=E?`${b}/update/${E}`:`${b}/add`,l=E?"put":"post";await j.A[l](s,r,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}}),i.Ay.success(E?"Product updated!":"Product added!"),D(),_()}catch(e){i.Ay.error("Failed to submit.")}},children:(0,w.jsxs)(o.A,{form:B,layout:"vertical",children:[(0,w.jsx)(o.A.Item,{label:"Product Name",name:"productName",rules:[{required:!0}],children:(0,w.jsx)(c.A,{})}),(0,w.jsx)(o.A.Item,{label:"Category",name:"category",rules:[{required:!0}],children:(0,w.jsx)(c.A,{})}),(0,w.jsx)(o.A.Item,{label:"Company Name",name:"companyName",children:(0,w.jsx)(c.A,{})}),(0,w.jsx)(o.A.Item,{label:"Original Price",name:"originalPrice",children:(0,w.jsx)(A.A,{style:{width:"100%"}})}),(0,w.jsx)(o.A.Item,{label:"Price",name:"price",children:(0,w.jsx)(A.A,{style:{width:"100%"}})}),(0,w.jsx)(o.A.Item,{label:"Stock",name:"stock",children:(0,w.jsx)(A.A,{style:{width:"100%"}})}),(0,w.jsx)(o.A.Item,{label:"Specifications",name:"specifications",children:(0,w.jsx)(P,{rows:3})}),(0,w.jsx)(o.A.Item,{label:"Shipping Policy",name:"shippingPolicy",children:(0,w.jsx)(P,{rows:2})}),(0,w.jsx)(o.A.Item,{label:"Return Policy",name:"returnPolicy",children:(0,w.jsx)(P,{rows:2})}),(0,w.jsx)(o.A.Item,{label:"Status",name:"status",children:(0,w.jsx)(l.A,{children:S.map((e=>(0,w.jsx)(v,{value:e,children:e},e)))})}),(0,w.jsxs)(o.A.Item,{label:"Primary Image",children:[(0,w.jsx)(p.A,{showUploadList:!1,customRequest:e=>{let{file:a}=e;q(a)&&U((e=>({...e,primaryImage:a,primaryImagePreview:URL.createObjectURL(a)})))},children:(0,w.jsx)(m.Ay,{icon:(0,w.jsx)(x.A,{}),children:"Upload"})}),O.primaryImagePreview&&(0,w.jsx)(h.A,{src:O.primaryImagePreview,width:120,style:{marginTop:10}})]}),(0,w.jsxs)(o.A.Item,{label:"Secondary Images",children:[(0,w.jsx)(p.A,{showUploadList:!1,customRequest:e=>{let{file:a}=e;q(a)&&U((e=>({...e,secondaryImages:[...e.secondaryImages,a],secondaryImagePreviews:[...e.secondaryImagePreviews,URL.createObjectURL(a)]})))},children:(0,w.jsx)(m.Ay,{icon:(0,w.jsx)(x.A,{}),children:"Upload"})}),(0,w.jsx)(d.A,{children:O.secondaryImagePreviews.map(((e,a)=>(0,w.jsx)(h.A,{src:e,width:80},a)))})]})]})})]})]})}}}]);
//# sourceMappingURL=364.bf7d0439.chunk.js.map