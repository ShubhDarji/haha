"use strict";(self.webpackChunkfinalfrontend=self.webpackChunkfinalfrontend||[]).push([[145],{1145:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(7565),r=a(8978),i=a(9483),c=a(8155),l=a(3934),n=a(5540),o=a(5828),d=a(4464),u=a(3659),p=a(3881),h=a(7929);const m=e=>{let{products:t,filters:a,setFilters:s}=e;const r=["All",...new Set(t.map((e=>e.category)))],i=["All",...new Set(t.map((e=>e.companyName)))];return(0,h.jsxs)("div",{className:"filter-container",children:[(0,h.jsxs)("div",{className:"filter-group",children:[(0,h.jsx)("label",{children:"Category"}),(0,h.jsx)("select",{value:a.category,onChange:e=>s({...a,category:e.target.value}),children:r.map(((e,t)=>(0,h.jsx)("option",{value:e,children:e},t)))})]}),(0,h.jsxs)("div",{className:"filter-group",children:[(0,h.jsx)("label",{children:"Brand"}),(0,h.jsx)("select",{value:a.brand,onChange:e=>s({...a,brand:e.target.value}),children:i.map(((e,t)=>(0,h.jsx)("option",{value:e,children:e},t)))})]}),(0,h.jsxs)("div",{className:"filter-group",children:[(0,h.jsx)("label",{children:"Price Range"}),(0,h.jsx)("select",{value:a.priceRange,onChange:e=>s({...a,priceRange:e.target.value}),children:["All","Under \u20b95,000","\u20b95,000 - \u20b910,000","\u20b910,000 - \u20b920,000","\u20b920,000 - \u20b950,000","\u20b950,000 - \u20b91,00,000","Above \u20b91,00,000"].map(((e,t)=>(0,h.jsx)("option",{value:e,children:e},t)))})]})]})},g=e=>{let{setSearchWord:t}=e;const[a,r]=(0,s.useState)("");return(0,h.jsx)("div",{className:"search-container",children:(0,h.jsx)("input",{type:"text",placeholder:"Search...",value:a,onChange:e=>{const a=e.target.value;r(a),t(a)}})})},x=()=>{const[e,t]=(0,s.useState)([]),[a,x]=(0,s.useState)(""),[j,v]=(0,s.useState)({category:"All",brand:"All",priceRange:"All"}),[f,y]=(0,s.useState)(""),[A,N]=(0,s.useState)(!0);(0,p.A)();(0,s.useEffect)((()=>{(async()=>{N(!0),y("");try{const{data:e}=await o.A.get("http://localhost:5001/api/products"),a=e.filter((e=>"Active"===e.status)).map((e=>({...e,id:e._id,primaryImageUrl:e.primaryImage||"/assets/default-product.png"}))),s=d.ZE.map((e=>({...e,primaryImageUrl:e.primaryImage||"/assets/default-product.png"}))),r=[...a,...s],i=Array.from(new Map(r.map((e=>[e.id||e.productName,e]))).values());t(i)}catch(f){var e,a;y((null===(e=f.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)||"Failed to load products. Please try again."),console.error("Error fetching products:",f)}finally{N(!1)}})()}),[]);const S=(()=>{let t=[...e];if(a.trim()&&(t=t.filter((e=>e.productName.toLowerCase().includes(a.toLowerCase().trim())))),"All"!==j.category&&(t=t.filter((e=>e.category===j.category))),"All"!==j.brand&&(t=t.filter((e=>e.companyName===j.brand))),"All"!==j.priceRange){const e={"Under \u20b95,000":[0,5001],"\u20b95,000 - \u20b910,000":[5001,1e4],"\u20b910,000 - \u20b920,000":[1e4,2e4],"\u20b920,000 - \u20b950,000":[2e4,50010],"\u20b950,000 - \u20b91,00,000":[50010,1e5],"Above \u20b91,00,000":[1e5,1/0]},[a,s]=e[j.priceRange];t=t.filter((e=>e.price>=a&&e.price<=s))}return t})();return A?(0,h.jsxs)(r.A,{className:"text-center py-5",children:[(0,h.jsx)(i.A,{animation:"border",role:"status"}),(0,h.jsx)("p",{children:"Loading products..."})]}):f?(0,h.jsx)(r.A,{className:"text-center py-5",children:(0,h.jsx)(c.A,{variant:"danger",children:f})}):(0,h.jsx)(s.Fragment,{children:(0,h.jsx)(r.A,{fluid:!0,className:"shop-layout",children:(0,h.jsxs)(l.A,{children:[(0,h.jsxs)(n.A,{md:3,className:"filter-sidebar",children:[(0,h.jsx)("h3",{children:"Filters"}),(0,h.jsx)(g,{setSearchWord:x}),(0,h.jsx)(m,{filters:j,setFilters:v,products:e})]}),(0,h.jsxs)(n.A,{md:9,className:"product-section",children:[(0,h.jsxs)("h2",{children:["All Products - ","All"!==j.brand?j.brand:"All"]}),S.length>0?(0,h.jsx)(u.A,{productItems:S}):(0,h.jsx)(c.A,{variant:"info",children:"No products found matching your criteria."})]})]})})})}},3659:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(3934),r=a(7565),i=a(4815),c=a(7929);const l=e=>{let{productItems:t}=e;return(0,r.useEffect)((()=>{}),[t]),0===t.length?(0,c.jsx)("h1",{className:"not-found",children:"Product Not Found !!"}):(0,c.jsx)(s.A,{className:"justify-content-center",children:t.map((e=>(0,c.jsx)(i.A,{title:null,productItem:e},e.id)))})},n=(0,r.memo)(l)},4815:(e,t,a)=>{a.d(t,{A:()=>m});var s=a(7565),r=a(723),i=a(1887),c=a(8039),l=a(621),n=a(2737),o=a(7605),d=a(5828),u=(a(6804),a(7929));const p={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:5001",h=e=>{let{rating:t}=e;return(0,u.jsx)("div",{className:"product-rating",children:[...Array(5)].map(((e,a)=>(0,u.jsx)(n.A,{className:"star-icon "+(a<t?"active-star":"inactive-star")},a)))})},m=e=>{let{productItem:t}=e;const a=(0,r.wA)(),n=(0,i.Zp)(),[m,g]=(0,s.useState)(1),[x,j]=(0,s.useState)(""),[v,f]=(0,s.useState)(0),[y,A]=(0,s.useState)(0),[N,S]=(0,s.useState)(!1),b=t._id||t.id,w=localStorage.getItem("token");(0,s.useEffect)((()=>{null!==t&&void 0!==t&&t.primaryImage?j(`${p}/uploads/${t.primaryImage}`):null!==t&&void 0!==t&&t.imgUrl?j(t.imgUrl):j("/assets/default-product.png")}),[t]),(0,s.useEffect)((()=>{b&&(async()=>{try{const{data:e}=await d.A.get(`${p}/api/reviews/${b}`);if(Array.isArray(e)){A(e.length);const t=e.reduce(((e,t)=>e+(t.rating||0)),0)/(e.length||1);f(Math.round(t))}}catch(e){console.error("Failed to fetch reviews:",e)}})()}),[b]),(0,s.useEffect)((()=>{(async()=>{if(w&&b)try{const{data:e}=await d.A.get(`${p}/api/wishlist`,{headers:{Authorization:`Bearer ${w}`}}),t=e.some((e=>{var t;return(null===(t=e.productId)||void 0===t?void 0:t._id)===b}));S(t)}catch(e){console.error("Wishlist check failed:",e)}})()}),[b,w]);const C=t.originalPrice>t.price?Math.round((t.originalPrice-t.price)/t.originalPrice*100):0,P=e=>{g((t=>Math.max(1,t+e)))};return t?(0,u.jsxs)("div",{className:"product-card",children:[(0,u.jsx)(o.A,{className:"wishlist-icon "+(N?"active":""),onClick:async()=>{if(!w)return c.oR.error("Please login to manage your wishlist."),void n("/login");try{const{data:e}=await d.A.post(`${p}/api/wishlist`,{productId:b},{headers:{Authorization:`Bearer ${w}`}});S(e.wished),c.oR.success(e.message)}catch(e){console.error("Wishlist update failed:",e),c.oR.error("Failed to update wishlist.")}}}),C>0&&(0,u.jsxs)("span",{className:"discount-badge",children:[C,"% OFF"]}),(0,u.jsx)("div",{className:"product-image",onClick:()=>n(`/product/${b}`),children:(0,u.jsx)("img",{loading:"lazy",src:x,alt:t.productName,className:"product-img",onError:()=>j("/assets/default-product.png")})}),(0,u.jsxs)("div",{className:"product-details",children:[(0,u.jsx)("h3",{className:"product-title",onClick:()=>n(`/product/${b}`),children:t.productName}),(0,u.jsx)(h,{rating:v}),(0,u.jsxs)("span",{className:"rating-value",children:["(",y," Reviews)"]}),(0,u.jsx)("p",{className:"shipping-info",children:"Ships in 3-4 days"}),(0,u.jsxs)("div",{className:"product-price",children:[(0,u.jsxs)("h4",{className:"current-price",children:["\u20b9",t.price]}),t.originalPrice&&(0,u.jsxs)("span",{className:"original-price",children:["\u20b9",t.originalPrice]})]}),(0,u.jsxs)("div",{className:"product-actions",children:[(0,u.jsxs)("div",{className:"quantity-container",children:[(0,u.jsx)("button",{className:"quantity-btn",onClick:()=>P(-1),children:"-"}),(0,u.jsx)("span",{className:"quantity-value",children:m}),(0,u.jsx)("button",{className:"quantity-btn",onClick:()=>P(1),children:"+"})]}),(0,u.jsx)("button",{className:"buy-btn",onClick:()=>{const e=JSON.parse(localStorage.getItem("user"));if(!e||!e.token)return localStorage.setItem("buyNowProduct",JSON.stringify({...t,qty:m})),localStorage.setItem("lastVisitedPage","/checkout"),c.oR.info("Please login to continue checkout."),void n("/login");n("/checkout",{state:{products:[{...t,qty:m}]}})},children:"Buy Now"})]}),(0,u.jsx)("button",{className:"add-to-cart-btn",onClick:()=>{a((0,l.bE)({...t,qty:m})),c.oR.success(`${t.productName} added to cart!`),g(1)},children:"Add to Cart"})]})]}):(0,u.jsx)("p",{className:"error-message",children:"Product data is missing."})}}}]);
//# sourceMappingURL=145.45aed74b.chunk.js.map