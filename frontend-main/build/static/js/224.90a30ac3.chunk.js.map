{"version":3,"file":"static/js/224.90a30ac3.chunk.js","mappings":"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","sources":["pages/Profile.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport \"./Profile.css\";\n\nconst Profile = () => {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [previewUrl, setPreviewUrl] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      navigate(\"/login\");\n      return;\n    }\n\n    fetchUserProfile();\n  }, [navigate]);\n\n  const fetchUserProfile = async () => {\n    try {\n      const token = localStorage.getItem(\"token\");\n      const res = await axios.get(\"http://localhost:5001/api/users/profile\", {\n        headers: { Authorization: `Bearer ${token}` },\n      });\n\n      if (res.data) {\n        setUser(res.data);\n        localStorage.setItem(\"user\", JSON.stringify(res.data));\n      }\n    } catch (err) {\n      console.error(\"Profile fetch error:\", err);\n      toast.error(\"Failed to fetch user data.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files[0];\n    setSelectedFile(file);\n    if (file) {\n      setPreviewUrl(URL.createObjectURL(file));\n    }\n  };\n\n  const handleChange = (e) => {\n    setUser({ ...user, [e.target.name]: e.target.value });\n  };\n\n  const updateProfile = async (e) => {\n    e.preventDefault();\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      toast.error(\"Authentication error. Please log in again.\");\n      return;\n    }\n  \n    // Require profile picture if not already uploaded\n    if (!user.profilePic && !selectedFile) {\n      toast.error(\"Please upload a profile picture.\");\n      return;\n    }\n  \n    const formData = new FormData();\n    formData.append(\"name\", user.name || \"\");\n    formData.append(\"phone\", user.phone || \"\");\n    formData.append(\"gender\", user.gender || \"\");\n    formData.append(\"address\", user.address || \"\");\n    formData.append(\"bio\", user.bio || \"\");\n    formData.append(\"dob\", user.dob || \"\");\n  \n    // Attach new file only if selected\n    if (selectedFile) {\n      formData.append(\"profilePicture\", selectedFile);\n    }\n  \n    try {\n      const res = await axios.put(\"http://localhost:5001/api/users/profile\", formData, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n  \n      toast.success(res.data.message || \"Profile updated successfully!\");\n      fetchUserProfile();\n    } catch (error) {\n      console.error(\"Profile update error:\", error);\n      toast.error(error?.response?.data?.message || \"An error occurred\");\n    }\n  };\n\n  return (\n    <div className=\"profile-container\">\n      {loading ? (\n        <p>Loading...</p>\n      ) : user ? (\n        <div className=\"profile-card\">\n          <h2>Your Profile</h2>\n\n          <form onSubmit={updateProfile}>\n            <div className=\"form-group\">\n              {previewUrl ? (\n                <img src={previewUrl} alt=\"Preview\" className=\"profile-image\" />\n              ) : user.profilePic ? (\n                <img\n                  src={`http://localhost:5001${user.profilePic}`}\n                  alt=\"Profile\"\n                  className=\"profile-image\"\n                />\n              ) : (\n                <p>No Profile Picture</p>\n              )}\n              <input type=\"file\" accept=\"image/*\" onChange={handleFileChange} />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Full Name:</label>\n              <input type=\"text\" name=\"name\" value={user.name || \"\"} onChange={handleChange} />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Email:</label>\n              <input type=\"email\" name=\"email\" value={user.email || \"\"} disabled />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Phone:</label>\n              <input type=\"text\" name=\"phone\" value={user.phone || \"\"} onChange={handleChange} />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Date of Birth:</label>\n              <input\n                type=\"date\"\n                name=\"dob\"\n                value={user.dob ? user.dob.split(\"T\")[0] : \"\"}\n                onChange={handleChange}\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Gender:</label>\n              <select name=\"gender\" value={user.gender || \"\"} onChange={handleChange}>\n                <option value=\"\">Select Gender</option>\n                <option value=\"male\">Male</option>\n                <option value=\"female\">Female</option>\n                <option value=\"other\">Other</option>\n              </select>\n            </div>\n\n            <div className=\"form-group\">\n              <label>Address:</label>\n              <input type=\"text\" name=\"address\" value={user.address || \"\"} onChange={handleChange} />\n            </div>\n\n            <div className=\"form-group\">\n              <label>Bio:</label>\n              <textarea name=\"bio\" value={user.bio || \"\"} onChange={handleChange}></textarea>\n            </div>\n\n            <button className=\"btn\" type=\"submit\">\n              Update Profile\n            </button>\n          </form>\n        </div>\n      ) : (\n        <p>Error loading profile. Please try again.</p>\n      )}\n    </div>\n  );\n};\n\nexport default Profile;"],"names":["Profile","user","setUser","useState","loading","setLoading","selectedFile","setSelectedFile","previewUrl","setPreviewUrl","navigate","useNavigate","useEffect","localStorage","getItem","fetchUserProfile","async","token","res","axios","get","headers","Authorization","data","setItem","JSON","stringify","err","console","error","toast","handleChange","e","target","name","value","_jsx","className","children","_jsxs","onSubmit","preventDefault","profilePic","formData","FormData","append","phone","gender","address","bio","dob","put","success","message","_error$response","_error$response$data","response","src","alt","type","accept","onChange","file","files","URL","createObjectURL","email","disabled","split"],"sourceRoot":""}